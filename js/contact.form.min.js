jQuery(document).ready(function (e) {
    "use strict";
    e(function () {
        e("#contact").validate({
            rules: {
                name: {
                    required: !0,
                    minlength: 2
                },
                surname: {
                    required: !0,
                    minlength: 2
                },
                email: {
                    required: !0,
                    email: !0
                },
                subject: {
                    required: !0
                },
                message: {
                    required: !0
                }
            },
            messages: {
                name: {
                    required: "Please type your name",
                    minlength: "Please type your name correctly"
                },
                surname: {
                    required: "Please type your surname",
                    minlength: "Please type your surname correctly"
                },
                email: {
                    required: "Please type your e-mail correctly"
                },
                subject: {
                    required: "Please type your number",
                    minlength: "To short number"
                },
                message: {
                    required: "Please type your message",
                    minlength: "To short message"
                }
            },
            submitHandler: function (form) {
                // Serialize form data to JSON
                const formData = {};
                e(form).serializeArray().forEach(function (item) {
                    formData[item.name] = item.value;
                });

                // Use Fetch API to send the form data
                fetch('https://us-central1-bute-backend.cloudfunctions.net/app/ysl', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData),
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    e("#contact :input").attr("disabled", "disabled");
                    e("#contact").fadeTo("slow", .15, function () {
                        e(this).find(":input").attr("disabled", "disabled");
                        e(this).find("label").css("cursor", "default");
                        e("#success").fadeIn();
                    });
                })
                .catch((error) => {
                    console.error('Error:', error);
                    e("#contact").fadeTo("slow", 1, function () {
                        e("#error").fadeIn();
                    });
                });
            }
        });
    });
});